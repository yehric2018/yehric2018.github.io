<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

    <title>Eric Yeh</title>
    <meta name="description" content="Eric Yeh">
    <meta name="author" content="yehric2018">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
        integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light">
        <a class="navbar-brand" href="/">Eric Yeh</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
            aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav ml-auto">
                <a class="nav-item nav-link" href="/about">About</a>
                <a class="nav-item nav-link" href="/projects">Projects</a>
                <a class="nav-item nav-link" href="/blog">Blog</a>
                <a class="nav-item nav-link" href="/resume/">Resume</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <article class="blog-post">
            <h2 class="blog-post-title">Configuring my DigitalOcean Virtual Machine</h2>
            <p class="blog-post-meta">August 15, 2021 by <a href="/">yehric</a></p>

            <img class="rounded col-8"
                    src="https://www.wpexplorer.com/wp-content/uploads/digital-ocean-wordpress-guide.jpg">

            <p>As part of the Github student developer pack, DigitalOcean offers $100 for hosting your own droplet.
                Check out how I was able to easily set mine up and how you could too!</p>
            <hr>
            <p>My internship mentor recently suggested I play around with the Github student developer pack. Since
                I only have 2 more years left of university, I figured I might as well make the most of the resources
                out there for me. I was surprised how much value came with the student devloper pack, however.
            </p>
            <p>(P.S. if you are student currently, make sure to claim your own
                <a href="https://education.github.com/pack">Github Student Developer Pack</a>)</p>
            <p>I had heard of DigitalOcean before, but before this my main experience with the cloud was using a VM for
                work. I decided I wanted to use this as an opportunity to set up a VM by myself.</p>
            <p>Setting up my VM into a productive work environment for my personal projects only took me a day. With
                $100 provided to  you, I decided to try $20 a month for now and see where it takes me.
            </p>

            <h2>Creating a New User</h2>
            <p>Right upon creating your VM, you can use the DigitalOcean portal to log in as the root user. This isn't
                ideal since if you are always logged in as root, you will always have administrative privileges. I didn't
                want to risk messing something up, so I wanted to created a user with restricted permissions for the sole
                purpose of working on projects.
            </p>
            <p>Upon logging onto root, I used the following command to create a user:</p>
            <p>
                <code>$ sudo adduser username</code>
            </p>
            <p>How can we be sure that this user actually got created? We can double-check with:</p>
            <p>
                <code>$ cat /etc/passwd</code>
            </p>
            <p>If you look at the end of the list printed out, you should see the newly created user listed there!
                Of course, despite being in the passwd folder, it doesn't actually show your password there in plaintext,
                so this is completely safe to do.
            </p>

            <h2>SSH onto the DigitalOcean Server</h2>
            <p>Originally, I was unable to SSH onto the server with a non-root user. I was confused why because I thought
                I gave an SSH key to the VM when creating it. This was bad because when I originally configured the VM, I
                disabled password login, so I wasn't able to supply a password.
            </p>
            <p>Fortunately, I was still able to log in as root, so I went on with admin privileges to change some of the
                configurations.
            </p>
            <p>First, I went to /etc/ssh/sshd_config and modified the PasswordAuthentication field to say "yes" instead of
                "no". This enables the username/password login method that I disabled before.
            </p>
            <p>Second, I run this command.</p>
            <p>
                <code>$ sudo service sshd reload</code>
            </p>
            
            <p>Now when I try to ssh on using the following command from VSCode/Git Bash:</p>
            <p>
                <code>$ ssh username@ip_address</code>
            </p>
            <p>It prompts me to enter a password instead of downright denying me entry to teh machine. I entered in my
                password that I set when creating a user and... success! I'm logged in!
            </p>
            
            <h2>SSH onto the DigitalOcean Droplet</h2>
            <p>The final piece of the puzzle is to enable SSH.</p>
            <p>It is easy to SSH onto the machine in the DigitalOcean portal. Just click on your project in DigitalOcean,
                then go under "Access" and "Launch Droplet Console" under the designated user.
            </p>
            <p>Now I want to be able to SSH from my own machine so I can use it with VSCode. First, I needed to
                enable password authentication (see the above section) so I can access the machine initally.
            </p>
            <p>Next, I had to generate an SSH key on my local machine. Fortunately, I already had one pre-generated,
                but if you want make your own you can following 
                <a href="https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">this article</a>. (It should just be a single command)
            </p>
            <p>After this, I just need to use password authentication with the following command:</p>
            <p>
                <code>$ ssh-copy-id username@ip_address</code>
            </p>
            <p>After entering in my password, it is copied over. Now I have the freedom to SSH from VSCode any time I want
                without needing to enter my long, secure password every time.
            </p>
            <p>To keep things even more nice and secure, it might be best to go back to the root user and disable password
                authentication again.
            </p>

            <h2>Conclusion</h2>
            <p>The amount of freedom I get on my new VM has motivated me to start up my own projects again, including
                a reboot of my personal website. I'm hoping to use this as an opportunity to improve my other projects as
                well. I highly encourage any student take advantage of the free credits offered.
            </p>
            <p>Happy coding!</p>
        </article>
    </div>
</body>

</html>